<app-header></app-header>

<div class="my-trades">
  <mat-tab-group>
    <!-- Initiated Trades Tab -->
    <mat-tab label="Initiated Trades">
      <ng-template matTabContent>
        <div *ngIf="initiatedTrades.length === 0" class="no-trades">
          <p>No initiated trades found.</p>
        </div>
        <div class="trade-grid">
          <div *ngFor="let trade of initiatedTrades" class="trade-card">
            <p class="trade-item-title">{{ trade.itemTitle }}</p>
            <p class="trade-status"><strong>Status:</strong> {{ trade.status }}</p>
            <div *ngIf="trade.status === 'Accepted'" class="trade-actions">
              <button (click)="completeTrade(trade.id)" class="btn-complete">Complete</button>
              <button (click)="cancelTrade(trade.id)" class="btn-cancel">Cancel</button>
            </div>
            <div *ngIf="trade.status === 'Completed'" class="trade-completed">
              <p>Trade Completed</p>
            </div>
          </div>
        </div>
      </ng-template>
    </mat-tab>

    <!-- Received Trades Tab -->
    <mat-tab label="Received Trades">
      <ng-template matTabContent>
        <div *ngIf="receivedTrades.length === 0" class="no-trades">
          <p>No received trades found.</p>
        </div>
        <div class="trade-grid">
          <div *ngFor="let trade of receivedTrades" class="trade-card">
            <p class="trade-item-title">{{ trade.itemTitle }}</p>
            <p class="trade-status"><strong>Status:</strong> {{ trade.status }}</p>
            <div *ngIf="trade.status === 'Pending'" class="trade-actions">
              <button (click)="acceptTrade(trade.id)" class="btn-accept">Accept</button>
              <button (click)="declineTrade(trade.id)" class="btn-cancel">Decline</button>
            </div>
            <div *ngIf="trade.status === 'Accepted'" class="trade-actions">
              <p>Initiator's Email: {{ trade.initiatorEmail }}</p>
              <button (click)="completeTrade(trade.id)" class="btn-complete">Complete</button>
              <button (click)="cancelTrade(trade.id)" class="btn-cancel">Cancel</button>
            </div>
            <div *ngIf="trade.status === 'Cancelled'" class="trade-cancelled"></div>
          </div>
        </div>
      </ng-template>
    </mat-tab>
  </mat-tab-group>
</div>
